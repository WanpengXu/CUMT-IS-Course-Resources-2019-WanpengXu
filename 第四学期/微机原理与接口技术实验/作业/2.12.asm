DATA SEGMENT
    PORTA EQU 280H
    PORTB EQU 281H
    PORTC EQU 282H 
    PORTR EQU 283H

    CLK0 EQU 2B8H  
    CLK1 EQU 2B9H
    CLK2 EQU 2BAH
    CLKR EQU 2BBH
DATA ENDS
CODE SEGMENT
    ASSUME CS:CODE,DS:DATA
START:
;8255
    MOV DX,PORTR               
    MOV AL,10001011B  
    OUT DX,AL 
;8253³õÊ¼
    MOV DX,CLKR
    MOV AL,00110101B  
    OUT DX,AL

    MOV DX,CLK0
    MOV AL,00H
    OUT DX,AL
    MOV AL,50H
    OUT DX,AL

    MOV DX,CLKR
    MOV AL,01110111B
    OUT DX,AL

    MOV DX,CLK1
    MOV AL,00H
    OUT DX,AL
    MOV AL,04H
    OUT DX,AL
;ÔÝ´æALÊý       
    MOV AL,01H
    MOV CL,AL

ST1:
    MOV DX,PORTA
    OUT DX,AL
 
    MOV DX,PORTB
    IN AL,DX
    MOV BL,AL
    AND BL,01H
TEST1:  
    IN AL,DX
    AND AL,01H
    CMP AL,BL
    JZ TEST1

    MOV AL,CL
    ROL AL,1
    MOV CL,AL
    
    JMP ST1
CODE ENDS
END START